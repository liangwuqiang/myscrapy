<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>scrapy框架Responses</h1></center></p>
            <div class="cont">
<h1>scrapy框架Responses</h1>
<p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">初始化参数</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p>class scrapy.http.Response(</p><p>url [ , </p><p>status=200,</p><p> headers,</p><p> body,</p><p> flags </p><p>] )</p><p><br/></p><p><strong>url </strong></p><p><strong><br/></strong></p><p>(string) – the URL of this response</p><p> </p><p><strong>headers</strong> </p><p><br/></p><p>(dict) – the headers of this response. The dict values can be strings (for single valued  headers) or lists (for multi-valued headers).</p><p> </p><p><strong>status</strong> </p><p><br/></p><p>(integer) – the HTTP status of the response. Defaults to 200.</p><p> </p><p><strong>body </strong></p><p><strong><br/></strong></p><p>(str) – the response body. It must be str, not unicode, unless you’re using a encoding-aware  Response subclass, such as TextResponse.</p><p> </p><p><strong>meta</strong> </p><p><br/></p><p>(dict) – the initial values for the Response.meta attribute. If given, the dict will be shallow  copied.</p><p> </p><p><strong>flags </strong></p><p><strong><br/></strong></p><p>(list) – is a list containing the initial values for the Response.flags attribute. If given, the list  will be shallow copied.</p><p> </p><p><strong>url</strong></p><p> </p><p>A string containing the URL of the response.</p><p>This attribute is read-only. To change the URL of a Response use replace().</p><p> </p><p><strong>status</strong></p><p> </p><p>An integer representing the HTTP status of the response. Example: 200, 404.</p><p>replace()</p><p><br/></p><p><strong>headers</strong></p><p> </p><p>A dictionary-like object which contains the response headers.</p><p><br/></p><p><strong>body</strong></p><p><strong><br/></strong></p><p>A str containing the body of this Response. Keep in mind that Response.body is always a str. If you want the unicode version use TextResponse.body_as_unicode() (only available in TextResponse and subclasses).</p><p>This attribute is read-only. To change the body of a Response use replace().</p><p> </p><p><strong>request</strong></p><p><strong><br/></strong></p><p>The Request object that generated this response. This attribute is assigned in the Scrapy engine, after the response and the request have passed through all Downloader Middlewares. In particular, this means that:</p><p>•HTTP redirections will cause the original request (to the URL before redirection) to be assigned to the redirected response (with the final URL after redirection).</p><p>•Response.request.url doesn’t always equal Response.url</p><p>•This attribute is only available in the spider code, and in the Spider Middlewares, but not in Down-loader Middlewares (although you have the Request available there by other means) and handlers of the response_downloaded signal.</p><p> </p><p><strong>meta</strong></p><p><strong><br/></strong></p><p>A shortcut to the Request.meta attribute of the Response.request object (ie. self.request.meta). </p><p>Unlike the Response.request attribute, the Response.meta attribute is propagated along redirects and retries, so you will get the original Request.meta sent from your spider.</p><p>See also:Request.meta attribute</p><p> </p><p><strong>flags</strong></p><p><strong><br/></strong></p><p>A list that contains flags for this response. Flags are labels used for tagging Responses. For example: ‘cached’, ‘redirected‘, etc. And they’re shown on the string representation of the Response (__str__ method) which is used by the engine for logging.</p><p> </p><p><strong>copy()</strong></p><p><strong><br/></strong></p><p>Returns a new Response which is a copy of this Response. </p><p><br/></p><p><strong>replace</strong></p><p><br/></p><p>([url, status, headers, body, request, flags, cls ])</p><p>Returns a Response object with the same members, except for those members given new values by whichever keyword arguments are specified. The attribute Response.meta is copied by default.</p><p> </p><p><strong>urljoin(url)</strong></p><p> </p><p>Constructs an absolute url by combining the Response’s url with a possible relative url.</p><p>This is a wrapper over urlparse.urljoin, it’s merely an alias for making this call:</p><p>urlparse.urljoin(response.url, url)</p><p> </p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">子类介绍</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p><strong>class scrapy.http.TextResponse(url [ , encoding [ , ... ]] )</strong></p><p><strong><br/></strong></p><p>TextResponse objects adds encoding capabilities to the base Response class, which is meant to be used only for binary data, such as images, sounds or any media file.</p><p>TextResponse objects support a new constructor argument, in addition to the base Response objects. The remaining functionality is the same as for the Response class and is not documented here.</p><p> </p><p>Parameters encoding (string) – is a string which contains the encoding to use for this response. If you create a TextResponse object with a unicode body, it will be encoded using this encoding (remember the body attribute is always a string). If encoding is None (default value), the encoding will be looked up in the response headers and body instead.</p><p> </p><p>TextResponse objects support the following attributes in addition to the standard Response ones:</p><p><strong><br/></strong></p><p><strong>encoding</strong></p><p> </p><p>A string with the encoding of this response. The encoding is resolved by trying the following mechanisms, in order: </p><p>1.the encoding passed in the constructor encoding argument </p><p>2.the encoding declared in the Content-Type HTTP header. If this encoding is not valid (ie. unknown), it is ignored and the next resolution mechanism is tried.</p><p>3.the encoding declared in the response body. The TextResponse class doesn’t provide any special functionality for this. However, the HtmlResponse and XmlResponse classes do.</p><p>4.the encoding inferred by looking at the response body. This is the more fragile method but also the last one tried.</p><p> </p><p><strong>selector</strong></p><p> </p><p>A Selector instance using the response as target. The selector is lazily instantiated on first access.</p><p>TextResponse objects support the following methods in addition to the standard Response ones:</p><p> </p><p><strong>body_as_unicode()</strong></p><p> </p><p>Returns the body of the response as unicode. This is equivalent to:</p><p>response.body.decode(response.encoding)</p><p>But not equivalent to:</p><p>unicode(response.body)</p><p>Since, in the latter case, you would be using the system default encoding (typically ascii) to convert the body to unicode, instead of the response encoding.</p><p><br/></p><p><strong>xpath(query</strong><strong>)</strong></p><p> </p><p>A shortcut to TextResponse.selector.xpath(query):</p><p>response.xpath('//p')</p><p><br/></p><p><strong>css(query)</strong></p><p><br/></p><p>A shortcut to TextResponse.selector.css(query):</p><p>response.css('p')</p><p><br/></p><p><strong>class scrapy.http.HtmlResponse(url [ , ... ] )</strong></p><p><strong><br/></strong></p><p>The HtmlResponse class is a subclass of TextResponse which adds encoding   auto-discovering support by looking into the HTML meta http-equiv attribute. See TextResponse.encoding. </p><p><br/></p><p><strong>class scrapy.http.XmlResponse(url [ , ... ] )</strong></p><p><strong><br/></strong></p><p>The XmlResponse class is a subclass of TextResponse which adds encoding auto-discovering support by looking into the XML declaration line. See TextResponse.encoding.</p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">Summary</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p><strong>要求：</strong></p><p><strong><br/></strong></p><p>1，掌握Request初始化参数的意义，并学会使用；了解Request中的剩余属性和方法</p><p>2，掌握通过Request传递数据的方法；</p><p>3，掌握FormRequest的用法；</p><p>4，掌握Response中属性方法的意义</p><p>5，了解Response的子类都有那些，是干什么用的</p><p> </p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">作业</span></h3><p><br/></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">使用scrapy登录生物谷，并爬取cfda的新闻第一页的信息（新闻列表），然后爬取列表中每个链接所代表的详细内容页的数据。</p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><strong>要求：</strong></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">1、必须实现登录功能；</p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">2、内容页抓取的字段包括：内容页的标题、来源、时间、正文；</p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">3、存储的形式为json lines文件</p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><br/></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><strong>提示：</strong></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;"><strong><br/></strong></p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">1、使用火狐浏览器观察登录的详细过程，然后模拟他的过程</p><p style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: normal;">2、在settings.py中配置两个变量即可实现存储为json lines文件</p><p> <br/></p><p><br/></p><p><span style='color: rgb(192, 0, 0); font-family: "microsoft yahei"; font-weight: bold; line-height: 20px; background-color: rgb(255, 255, 255);'>【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></p><p>
</p></p></div>
        </body></html>