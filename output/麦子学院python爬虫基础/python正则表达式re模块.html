<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>python正则表达式re模块</h1></center></p>
            <div class="cont">
<h1>python正则表达式re模块</h1>
<p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">认识正则表达式</span></h3><p><br/></p><p>程序员分两种：（这个分类原则突出了正则表达式的重要性，因为正则表达式不仅仅是在Python里面，在很多语言里面，包括在shell脚本里面都有广泛的应用。所以正则表达式对程序员来讲是个很重要的技能。）</p><p><br/></p><p>1）懂正则表达式</p><p><br/></p><p>2）不懂正则表达式</p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">Python里面的正则表达式re</span></h3><p><br/></p><p>1）pattern：匹配模式，遵循正则表达式语法</p><p><br/></p><p>2）Method：匹配方法，search/match/split/findall/finditer/sub/subn</p><p><br/></p><p>一个例子：提取价格</p><p><br/></p><p>代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_demo():</p><p>    # 解析价格</p><p>    txt = 'If you purchase more than 100 sets, the price of product A is $9.90.'</p><p>    # 解析数量和价格: pattern/string/MatchObject</p><p>    m = re.search(r'(\d+).*\$(\d+\.?\d*)', txt)  //\d数字，+匹配1到多个数字，.匹配所有的字符，*表示0到多个所有的字符，\$ 加\表示转义，后面的.也是转义字符，?表示匹配0个或1个的.，因为价格里面可能包括小数点，也可能没有包括小数点，\d*表示匹配0个或多个数字</p><p>print(m.groups())</p><p><br/></p><p>if __name__ == '__main__':</p><p>    re_demo()</p><p><br/></p><p>运行结果，大家可以看到它的运行结果是100，9.90。</p><p><br/></p><p><img alt="regular1.png" height="62" src="images/8cec776523d655ed66cf38212614e948.png" style="width: 936px; height: 62px;" title="40LsJWpb3OXlreVODk.png" width="936"/></p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">re模块介绍</span></h3><p><br/></p><p>1）re.search：搜索字符串，找到匹配的第一个字符</p><p><br/></p><p><strong>示例：</strong></p><p>search：</p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># search vs. Match</p><p>s = 'abcd'</p><p>    print(re.search(r'c', s))</p><p>    </p><p>if __name__ == '__main__':</p><p>    re_method()</p><p><br/></p><p>运行结果，因为返回的是一个MatchObject，所以它是匹配的。</p><p><br/></p><p><img alt="regular2.png" height="64" src="images/6dc61a15a7d1c706d9f6033ebf55f583.png" style="width: 928px; height: 64px;" title="cQyRaNbo43TaESzXlh.png" width="928"/></p><p><br/></p><p>2）re.match：从字符串开始匹配</p><p><br/></p><p>match：</p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># search vs. Match</p><p>s = 'abcd'</p><p>print(re.search(r'c', s))</p><p>print(re.match(r'c', s))    </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，None找不到，为什么找不到呢？因为我们从这个待匹配的字符串头部开始往后去匹配，对match这个正则表达式来说，要匹配一个字符串以c开头的字符串，很显然是不匹配的。</p><p><br/></p><p><img alt="regular3.png" src="images/64f73dbec9c778d723c091f1a35df318.png" title="2Ke0ACKFypuV4MjRe8.png"/></p><p><br/></p><p>那怎么来匹配这个c呢？修改代码：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p>s = 'abcd'</p><p>print(re.search(r'c', s))</p><p>print(re.match('r.*c', s))    //. 表示我匹配任意一个字符，*表示匹配0到多个，也就是说，在c的前面可以有0到多个类字符  </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，匹配成功。</p><p><br/></p><p><img alt="regular4.png" src="images/76ba22f48971a65389fa1f9876dbb16e.png" title="Yfw2QpHs7TkG7k5WHS.png"/></p><p><br/></p><p>3）search  vs.match</p><p><br/></p><p>search：搜索字符串任意位置的匹配</p><p><br/></p><p>只从字符串的起始位置开始匹配</p><p><br/></p><p>修改search的正则表达式：</p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># search vs. Match</p><p>s = 'abcd'</p><p>    print(re.search(r'^c', s))    //^表示某一字符串的开始位置，我们要搜素以c开始的字符串</p><p>print(re.match('r.*c', s))    //. 表示我匹配任意一个字符，*表示匹配0到多个，也就是说，在c的前面可以有0到多个类字符  </p><p><br/></p><p>if __name__ == '__main__':</p><p>re_demo()</p><p><br/></p><p><br/></p><p>运行结果，第一个返回的是None</p><p><br/></p><p><img alt="regular5.png" src="images/2871cfe128dabc4dbc327552434e3735.png" title="8SSO45fYOFy61kDXtt.png"/></p><p><br/></p><p>4）split：使用正则表达式来分隔字符串</p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p> # split</p><p> s1 = 'Hello this is Joey'  //一般我们是通过空格把单词给分隔出来</p><p> print(re.split(r'\W+', s1))   //\W任意的非字母，不是字母作为界限，把单词给分隔出来</p><p> </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果</p><p><br/></p><p><img alt="regular6.png" src="images/a1e10a86fa9f8b0e01b63f61e66e6dfb.png" title="XoJl0xCaMCLseGnc0e.png"/></p><p><br/></p><p>使用正则表达式有什么优势呢？</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p> # split</p><p> s1 = 'this,  is|  Joey — Huang’  //比如：这里我们改为这样表示</p><p> print(re.split(r'\W+', s1))   //\W任意的非字母，不是字母作为界限，把单词给分隔出来</p><p> </p><p>if __name__ == '__main__':</p><p>re_method()</p><p>运行结果，所不同的是，这里多了一些空的字符串，所以它还是能很好的把这些单词给区分出来。</p><p><br/></p><p><img alt="regular7.png" src="images/1a67cc279910283860881687fbd12a4a.png" title="4uZ7sHaQBB1yYsIcxc.png"/></p><p><br/></p><p>5）findall：根据正则表达式从左到右搜索匹配项，返回匹配的字符串列表（跟search是对应的关系，search是只要搜索到匹配的第一个，它就会停下来，findall是会继续往下查找）</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># findall</p><p>    s1 = 'Hello, this is Joey'   //这两个是我们要处理的字符串</p><p>    s2 = 'The first price is $9.90 and the second price is $100'</p><p>    print(re.findall(r'\w+', s1))   //\w+匹配1到多个任意的字符</p><p>   </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，打印出了这里面所有的单词。</p><p><br/></p><p><img alt="regular8.png" src="images/79c6d311536f40b9be36bca1ad70382f.png" title="HtMdtlwM2gkjpKn71a.png"/></p><p><br/></p><p>把数字也给它打印出来</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># findall</p><p>    s1 = 'Hello, this is Joey'   //这两个是我们要处理的字符串</p><p>    s2 = 'The first price is $9.90 and the second price is $100'</p><p>print(re.findall(r'\w+', s1))   //\w+匹配1到多个任意的字符</p><p>    print(re.findall(r'\d+', s2))   //\d+匹配1到多个数字</p><p>   </p><p>if __name__ == '__main__':</p><p>re_demo()</p><p><br/></p><p>运行结果，可见它遇到数字就打印出来了，但是我们这里是9.90，不是我们想要的数字。</p><p><br/></p><p><img alt="regular9.png" height="79" src="images/e96c58332d498f74815c83497270a811.png" style="width: 905px; height: 79px;" title="WIDqzwAk5vSwJ75pXC.png" width="905"/></p><p><br/></p><p>我们匹配数字不能只匹配单个的数字，因为里面可能有小数点，也可能没有，修改代码：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p># findall</p><p>    s1 = 'Hello, this is Joey'   //这两个是我们要处理的字符串</p><p>    s2 = 'The first price is $9.90 and the second price is $100'</p><p>print(re.findall(r'\w+', s1))   //\w+匹配1到多个任意的字符</p><p>print(re.findall(r'\d+\?\d*', s2))   </p><p>   </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p><br/></p><p>运行结果，这样我们的结果就正确了。</p><p><br/></p><p><img alt="regular10.png" src="images/06d2abfd376ff187fe7e965bc0e89949.png" title="DrwTPXCOHZAzBWEXwp.png"/></p><p><br/></p><p>6）finditer：根据正则表达式从左到右搜索匹配项，返回一个迭代器迭代返回MatchObject</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p> # finditer</p><p>    s2 = 'The first price is $9.90 and the second price is $100'</p><p>    i = re. Finditer(r’\d+\.?\d*,s’)</p><p>for m in i:</p><p>        print(m.group())</p><p>   </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，可以看到，它的结果是9.90和100</p><p><br/></p><p><img alt="regular11.png" src="images/4461575dc2691d83038c40ee43367215.png" title="iNsJPwLzYCgXEH35uq.png"/></p><p><br/></p><p>7）sub：字符串替换</p><p><br/></p><p>pattern：正则表达式</p><p><br/></p><p>repl：替换项，字符串或函数，如果是函数的话，直接返回要替换的字符串就ok了</p><p><br/></p><p>string：待处理的字符串</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p> # sub</p><p>    s2 = 'The first price is $9.90 and the second price is $100'</p><p>    print(re.sub(r'\d+', '&lt;number&gt;', s2))   //sub返回的是替换后的字符串</p><p>   </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，这两个数字，被替换成了number。</p><p><br/></p><p><img alt="regular12.png" src="images/ef62750ad5843e11eadf8e7617ff6e11.png" title="qzm0wjy62DxwW16DoC.png"/></p><p><br/></p><p>8）subn和sub一样：返回值多了替换的字符串个数</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import re</p><p><br/></p><p>def re_method():</p><p>  # subn</p><p>    print(re.subn(r'\d+', '&lt;number&gt;', s2)))   </p><p>   </p><p>if __name__ == '__main__':</p><p>re_method()</p><p><br/></p><p>运行结果，它返回的结果第一部分是返回后的字符串，第二个是替换的个数。</p><p><br/></p><p><img alt="regular13.png" src="images/44ce245688700ba101706a1c884fb574.png" title="MuS8JBCqJvESGKAVIw.png"/></p><p><br/></p><p><br/></p><p><span style="color: rgb(192, 0, 0);">【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></p><p><br/></p><p>
</p></p></div>
        </body></html>