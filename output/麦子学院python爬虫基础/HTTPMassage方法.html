<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>HTTPMassage方法</h1></center></p>
            <div class="cont">
<h1>HTTPMassage方法</h1>
<p><p><br/></p><hr/><p><strong>探求HTTPMassage的方法</strong></p><p><strong><br/></strong></p><p>#方法</p><p><br/></p><p>HTTPMassage没有官方的文档，如何找出其有用的方法？</p><p><br/></p><p>info（）：返回httplib.HTTPMassage实例</p><p><br/></p><p>通过httplib.HTTPMassage可以看到更多的关于应答的信息</p><p><br/></p><p>httplib.HTTPMassage：</p><p><br/></p><p>1）Headers 头信息</p><p><br/></p><p>2）gettype（）获取它的媒体类型的</p><p><br/></p><p>3）getheader（）/getheaders（）可以从http头里面获取到的头字段</p><p><br/></p><p>4）Items（）/keys（）/values（）打印出所有的头出来</p><p><br/></p><p>示例：</p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):</p><p>    for i in list:</p><p>        print(i)</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com/no-exist')</p><p>msg = s.info() //获取一个HTTPMassage的对象</p><p>    print_list(msg.headers)</p><p><br/></p><p>if __name__ == '__main__':</p><p>demo()</p><p><br/></p><p>运行结果，打印出了所有的头信息</p><p>111</p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):</p><p>    for i in list:</p><p>        print(i)</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com/no-exist')</p><p>msg = s.info() //获取一个HTTPMassage的对象</p><p>    print_list(msg.items())</p><p><br/></p><p>if __name__ == '__main__':</p><p>demo()</p><p><br/></p><p>运行结果，返回的是解析过的头的列表，每个元素解析成字段名称，字段的值。</p><p><br/></p><p><img alt="urllib12.png" src="images/fd1b13623acaa97b69cac61358cbc908.png" title="9WF6omNveh91uxVxcr.png"/></p><p><br/></p><p>当然，也可以getheader直接获取这个头，代码如下：</p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):</p><p>    for i in list:</p><p>        print(i)</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com/no-exist')</p><p>msg = s.info() //获取一个HTTPMassage的对象</p><p>    print(msg.getheader(Content-Type))</p><p><br/></p><p>if __name__ == '__main__':</p><p>demo()</p><p><br/></p><p>运行结果</p><p><br/></p><p><img alt="urllib13.png" src="images/dd6a235fae357e6daaf726d8472567df.png" title="gf0p30PVBekFzlC6I5.png"/></p><p><br/></p><p>我们是如何知道这些方法的呢？这里教大家一个技巧，就是dir函数：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):</p><p>    for i in list:</p><p>        print(i)</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com/no-exist')</p><p>msg = s.info() //获取一个HTTPMassage的对象</p><p>  //print(msg.getheader(Content-Type))</p><p>print-list(dir(msg))// dir就是会把这个所有的方法都打印出来</p><p><br/></p><p>if __name__ == '__main__':</p><p>demo()</p><p><br/></p><p>运行结果，可以看到列表有很多元素，也有很多方法，所以用dir就可以探索到底有哪些方法</p><p><br/></p><p><img alt="14.png" src="images/a1cbda6bc12edc60d4d8f802906e2452.png" title="g6gudfe9QYjHt6LuYC.png"/></p><p><br/></p><p><br/></p><p><br/></p><p><strong><span style="color: rgb(192, 0, 0);">【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></strong></p><p><br/></p><p>
</p></p></div>
        </body></html>