<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>python之urllib.urlopen</h1></center></p>
            <div class="cont">
<h1>python之urllib.urlopen</h1>
<p><p><br/></p><hr/><p><strong>Urllib.urlopen</strong></p><p><strong><br/></strong></p><p>#Urllib.urlopen</p><p><br/></p><p>打开一个远程的http连接，然后可以对这个参数进行读取</p><p><br/></p><p><strong>1.urllib.urlopen</strong></p><p><strong><br/></strong></p><p>1）Url:scheme（http:/file:）指定远程的服务器地址，当然它也支持本地的软件读取</p><p><br/></p><p>2）data：如果有，变成POST方法，也就是对服务器POST数据，当然这个POST比较简单，数据格式必须是application/X-www-form-urlencoded，就是类似于在登录的时候输入用户名密码这种。</p><p><br/></p><p>3）返回类文件句柄</p><p><br/></p><p>2.类文件句柄的常用方法</p><p><br/></p><p>1）read（size）size=-1/None 读字节</p><p><br/></p><p>2）readline（）读一行</p><p><br/></p><p>3）readlines（）所有的行都会读出来，它返回的是一个链表</p><p><br/></p><p>4）close（）把这个文件给关闭掉</p><p><br/></p><p>5）getcode（）返回http请求的应答码200，2xx就是正确的应答码</p><p><br/></p><p>示例：</p><p><br/></p><p>开发环境：</p><p><br/></p><p><img alt="urllib1.png" src="images/75114c3c788d22db5352222e824cf627.png" title="s83rbsZPf0TSEfQ5vd.png"/></p><p><br/></p><p>创建项目urllib-demo</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib  //导入</p><p><br/></p><p>def demo():   //定义一个demo函数</p><p>    s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>Print(s.read(100)) //读100字节</p><p><br/></p><p>if __name__ == '__main__':   //定义name</p><p>Demo()</p><p><br/></p><p>运行结果，输出了100字节。</p><p><br/></p><p><img alt="urllib2.png" src="images/e1e47a672d2e443a6747c2afb65a479e.png" title="WDhOQlNU7YJoxIhbDh.png"/></p><p><br/></p><p>当然你也可以不提供参数，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib  //导入</p><p><br/></p><p>def demo():   //定义一个demo函数</p><p>    s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>Print(s.read()) //读所有的字节</p><p><br/></p><p>if __name__ == '__main__':   //定义name</p><p>Demo()</p><p><br/></p><p>运行结果，输出了所有的字节</p><p><br/></p><p><img alt="urllib3.png" src="images/3ea2e5e8d07ce495d8c8a01014088298.png" title="sV5ZLKYbiy7Vt1jK2U.png"/></p><p><br/></p><p>打印一行数据。代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib  //导入</p><p><br/></p><p>def demo():   //定义一个demo函数</p><p>    s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>Print(s.readline()) //打印一行数据</p><p>if __name__ == '__main__':   //定义name</p><p>Demo()</p><p><br/></p><p>运行结果，打印了一行数据</p><p><br/></p><p><img alt="urllib4.png" src="images/a9051f971088d4bb94cddf53c82bbefb.png" title="oU8v04PDwuTjr37YC5.png"/></p><p><br/></p><p>打印10行，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib  //导入</p><p><br/></p><p>def demo():   //定义一个demo函数</p><p>s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>for i in range(10)</p><p>   Print(‘line %d: %s’ %(i+1,s.readline())) //打印10行数据，把行号还有行的内容打出来</p><p>if __name__ == '__main__':   //定义name</p><p>Demo()</p><p><br/></p><p>运行结果</p><p><br/></p><p><img alt="urllib5.png" src="images/17dd6d72fa4153660ba339726eb27087.png" title="Z23GCAnZnlqGG83SSl.png"/></p><p><br/></p><p>再看看readlines，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib  //导入</p><p><br/></p><p>def demo():   //定义一个demo函数</p><p>s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>lines = s.readlines() //readlines会返回所有行的列表</p><p>print(lines)</p><p>if __name__ == '__main__':   //定义name</p><p>Demo()</p><p><br/></p><p>运行结果，大家可以看到这是个列表，但是这样打出来很难看，我们可以修改一下</p><p><br/></p><p><img alt="urllib6.png" height="56" src="images/3283cd61ecf6b26da9a88bb6019bde21.png" style="width: 957px; height: 56px;" title="TJ3nRkzNIlm7KpkJNc.png" width="957"/></p><p><br/></p><p>修改后代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):  //定义一个print_list函数，它的参数是一个链表</p><p>    for i in list:</p><p>        print(i)  //逐行给它打印出来</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>        lines = s.readlines() //readlines会返回所有行的列表</p><p>        print_list(lines)  //使用list来打印整个数据</p><p><br/></p><p>if __name__ == '__main__':</p><p>    demo()</p><p><br/></p><p>运行结果，可以看到是逐行打印出来</p><p><br/></p><p><img alt="urllib7.png" src="images/bcb30018b740bab536bcd269446f3651.png" title="4K0pbRsucruV3qrjkq.png"/></p><p><br/></p><p>返回应答码，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):  //定义一个print_list函数，它的参数是一个链表</p><p>    for i in list:</p><p>        print(i)  //逐行给它打印出来</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com')  //打开一个urllib</p><p>        print(s.getcode())  //返回应答码</p><p><br/></p><p>if __name__ == '__main__':</p><p>    demo()</p><p><br/></p><p>运行结果，200,成功</p><p><br/></p><p><img alt="urllib8.png" src="images/45e238fc0ddfe3a697301a0f60f9d040.png" title="zP9mGmhVkHlDgukg7a.png"/></p><p><br/></p><p>那如果我们获取一个不存在的url，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):  //定义一个print_list函数，它的参数是一个链表</p><p>    for i in list:</p><p>        print(i)  //逐行给它打印出来</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('http://blog.kamidox.com/no-exist')  //打开一个不存在的urllib</p><p>        print(s.getcode())  //返回应答码</p><p><br/></p><p>if __name__ == '__main__':</p><p>    demo()</p><p><br/></p><p>运行结果，404，找不到这个协议</p><p><br/></p><p><img alt="urllib9.png" src="images/ea8fdf7bab60bc26be8575b5cc8cd0b1.png" title="Fu1fY7xXMMLHjwiFII.png"/></p><p><br/></p><p>如果我们没有协议，就把它变成一个字符串，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def print_list(list):  //定义一个print_list函数，它的参数是一个链表</p><p>    for i in list:</p><p>        print(i)  //逐行给它打印出来</p><p><br/></p><p>def demo():</p><p>    s = urllib.urlopen('blog.kamidox.com/no-exist')  //打开一个不存在的urllib，没有协议</p><p>        print(s.getcode())  //返回应答码</p><p><br/></p><p>if __name__ == '__main__':</p><p>    demo()</p><p><br/></p><p>运行结果如下，它把这个字符串当成了一个本地的文件，所以这个协议一定要写，这个表示从什么原材料去获取这个资源</p><p><br/></p><p><img alt="urllib10.png" src="images/fd1f8c178838e0431fffc8fea8ad7fe9.png" title="Xhlrn2pxqpHxnYudu9.png"/></p><p><br/></p><p><br/></p><p><br/></p><p><strong><span style="color: rgb(192, 0, 0);">【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></strong></p><p><br/></p><p>
</p></p></div>
        </body></html>