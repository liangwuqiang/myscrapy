<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>python urllib工具函数</h1></center></p>
            <div class="cont">
<h1>python urllib工具函数</h1>
<p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">urllib.urlencode</span></h3><p><br/></p><p>1）把字典数据转化成URL编码</p><p><br/></p><p>2）用途</p><p>  </p><p>a)对URL参数进行编码</p><p>  </p><p>b)对post上去的form数据进行编码</p><p><br/></p><p><strong>示例：</strong></p><p><strong><br/></strong></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p><br/></p><p>def urlencode():</p><p>    params = {'score': 100, 'name': '爬虫基础', 'comment': 'very good'} //这里面我们的参数是长这个样子的，这是个字典</p><p>    qs = urllib.urlencode(params) //编码以后</p><p>    print(qs)</p><p><br/></p><p>if __name__ == '__main__':</p><p>urlencode()</p><p><br/></p><p>运行结果，这里比较特别的是name，本来是中文，被编码以后变成了utf8编码，空格也被编译成了+号，每个参数之间使用&amp;号把它连接起来，所以这个就是urlencode的用法。</p><p><br/></p><p><img alt="urlencode1.png" src="images/2025e7d920e15dcbccf528af6616caee.png" title="WpQewJS3RyIi1OjNuZ.png"/></p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">urlparse.parse-qs</span></h3><p><br/></p><p>把URL编码转换成字典数据，和urlencode正好相反</p><p><br/></p><hr/><p><br/></p><h3><span style="color: rgb(94, 207, 186);">其它</span></h3><p><br/></p><p>1）quote</p><p><br/></p><p>2）unquote</p><p><br/></p><p>3）pathname2url</p><p><br/></p><p>4）url2pathname </p><p><br/></p><hr/><h3><span style="color: rgb(94, 207, 186);">例子</span></h3><p><br/></p><p>百度搜索中文为例分析URL构成</p><p><br/></p><p><strong>示例：</strong></p><p><strong><br/></strong></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p>import urlparse</p><p><br/></p><p><br/></p><p>def urlencode():</p><p>    params = {'score': 100, 'name': '爬虫基础', 'comment': 'very good'}</p><p>    qs = urllib.urlencode(params)</p><p>    print(qs)</p><p>print(urlparse.parse_qs(qs))  //解码回来</p><p><br/></p><p>if __name__ == '__main__':</p><p>    urlencode()</p><p><br/></p><p>运行结果，可以看到编码后和解码后的内容。</p><p><br/></p><p><img alt="urlencode2.png" src="images/cd755610b7edfebe3a56a6e0d4f98102.png" title="octIICnYjZOH6J3bHg.png"/></p><p><br/></p><p>我们来看一个更复杂的例子，百度搜索里面的url，我们看怎么从这个url里面去解析出这个所有的请求参数，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p>import urlparse</p><p><br/></p><p>def urlencode():</p><p>    params = {'score': 100, 'name': '爬虫基础', 'comment': 'very good'}</p><p>    qs = urllib.urlencode(params)</p><p>    print(qs)</p><p>print(urlparse.parse_qs(qs))  //解码回来</p><p><br/></p><p>def parse_qs():</p><p>    url = 'https://www.baidu.com/s?wd=url%20%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99&amp;rsv_spt=1&amp;rsv_iqid=0x928cf1380000a436&amp;issp=1&amp;f=8&amp;rsv_bp=0&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_sug3=16&amp;rsv_sug1=15&amp;rsv_t=1699JwFmhB8a5kfErU33lHHt8KRbsMzqMwqlJ00%2F9fusUM%2Bmx3gc8GLs5In0kVh7s3zU&amp;rsv_sug2=0&amp;inputT=5565&amp;rsv_sug4=6174'</p><p>    result = urlparse.urlparse(url)  //解析完后会返回一个结果</p><p>print(result)</p><p><br/></p><p>if __name__ == '__main__':</p><p>urlencode()</p><p>parse_qs()</p><p><br/></p><p>运行结果，我们可以看到，这个返回的结果里面是一个parseResult对象，它的网络协议是https，query这个属性就是我们要的参数。</p><p><br/></p><p><img alt="urlencode3.png" height="101" src="images/f7b85447a49a9f20ea03e2f47ed65103.png" style="width: 978px; height: 101px;" title="FxGhAsZNy3x4BMg7xt.png" width="978"/></p><p><br/></p><p>我们把这个query解析出来，代码如下：</p><p><br/></p><p># -*- coding: utf-8 -*-</p><p>import urllib</p><p>import urlparse</p><p><br/></p><p>def urlencode():</p><p>    params = {'score': 100, 'name': '爬虫基础', 'comment': 'very good'}</p><p>    qs = urllib.urlencode(params)</p><p>    print(qs)</p><p>print(urlparse.parse_qs(qs))  //解码回来</p><p><br/></p><p>def parse_qs():</p><p>    url = 'https://www.baidu.com/s?wd=url%20%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99&amp;rsv_spt=1&amp;rsv_iqid=0x928cf1380000a436&amp;issp=1&amp;f=8&amp;rsv_bp=0&amp;rsv_idx=2&amp;ie=utf-8&amp;tn=baiduhome_pg&amp;rsv_enter=1&amp;rsv_sug3=16&amp;rsv_sug1=15&amp;rsv_t=1699JwFmhB8a5kfErU33lHHt8KRbsMzqMwqlJ00%2F9fusUM%2Bmx3gc8GLs5In0kVh7s3zU&amp;rsv_sug2=0&amp;inputT=5565&amp;rsv_sug4=6174'</p><p>    result = urlparse.urlparse(url)  //解析完后会返回一个结果</p><p>print(result)</p><p>params = urlparse.parse_qs(result.query)//解析query</p><p>print_dict(params)</p><p><br/></p><p>if __name__ == '__main__':</p><p>urlencode()</p><p>parse_qs()</p><p><br/></p><p>运行结果，我们可以看到这是个字典</p><p><img alt="urlencode4.png" height="109" src="images/678a7074e1b45a0e0963192334793f30.png" style="width: 1028px; height: 109px;" title="jrwRAWPogJ2AXqkQ86.png" width="1028"/></p><p><br/></p><p><br/></p><p><br/></p><p><strong><span style="color: rgb(192, 0, 0);">【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></strong></p><p><br/></p><p>
</p></p></div>
        </body></html>