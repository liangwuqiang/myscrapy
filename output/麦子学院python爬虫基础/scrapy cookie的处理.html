<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>scrapy cookie的处理</h1></center></p>
            <div class="cont">
<h1>scrapy cookie的处理</h1>
<p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">登陆的原理</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p>话（Session）跟踪是Web程序中常用的技术，用来跟踪用户的整个会话。常用的会话跟踪技术是Cookie与Session。</p><p><br/></p><p><strong>1、身份识别</strong></p><p><strong><br/></strong></p><p>①用户名</p><p>②密码</p><p>③密钥</p><p><br/></p><p><strong>2、web中的身份识别</strong></p><p><strong><br/></strong></p><p>①cookie通过在客户端记录信息确定用户身份,</p><p>Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该 Cookie 一同提交给服务器。 服务器检查该 Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。</p><p><br/></p><p>②sessionS通过在服务器端记录信息确定用户身份,</p><p>Session是另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而Session保存在服务器上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。</p><p>如果说Cookie机制是通过检查客户身上的“通行证”来确定客户身份的话，那么Session机制就是通过检查服务器上的“客户明细表”来确认客户身份。Session相当于程序在服务器上建立的一份客户档案，客户来访的时候只需要查询客户档案表就可以了。</p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">登陆的方法</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p><strong>1、FormRequest 使用用户名和密码登陆</strong></p><p><br/></p><p>前面的内容曾经提到过：</p><p><br/></p><p><img alt="Python1.png" src="images/3c114586b678caa0050995ccab6cccb6.png" title="Fig4j1gnQMDbNAQ6xq.png"/> </p><p><br/></p><p><img alt="Python2.png" src="images/867677467a8c8d30bfd796bda49b3c74.png" title="XwavwimOA19cF9EkQv.png"/> </p><p><br/></p><p><strong>2、添加cookie </strong></p><p><strong><br/></strong></p><p>添加cookie到Request当中</p><p>示例代码：</p><p><br/></p><p><img alt="Python3.png" src="images/934e3702e3dadf82503caf269fed944a.png" title="dqmA2mxfxxmyLiqxQr.png"/> </p><p><br/></p><p><img alt="Python4.png" src="images/dfa08e07cdea2c03b9d3c9925b271272.png" title="n8ZXEoHp2NQI8xG8bq.png"/> </p><p><br/></p><p><strong>cookie的处理</strong></p><p><strong><br/></strong></p><p>cookies middleware1，</p><p>1、相关参数：</p><p>COOKIES_ENABLED</p><p>Default: True</p><p>Whether to enable the cookies middleware. If disabled, no cookies will be sent to web servers.</p><p>COOKIES_DEBUG</p><p>Default: False</p><p>If enabled, Scrapy will log all cookies sent in requests (ie. Cookie header) and all cookies received in responses (ie.</p><p>Set-Cookie header).</p><p><br/></p><p>2，原理解释</p><p>This middleware enables working with sites that require cookies, such as those that use sessions. It keeps track</p><p>of cookies sent by web servers, and send them back on subsequent requests (from that spider), just like web browsers do.</p><p> </p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">总结</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p>1，掌握使用formRequest登录的方法；</p><p>2，掌握使用cookies模拟登录者的方法；</p><p><br/></p><p><br/></p><p><span style='color: rgb(192, 0, 0); font-family: "microsoft yahei"; font-weight: bold; line-height: 20px; background-color: rgb(255, 255, 255);'>【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></p><p>
</p></p></div>
        </body></html>