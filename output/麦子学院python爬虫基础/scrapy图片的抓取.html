<!DOCTYPE html>
        <html><head><meta charset="UTF-8">
        </head><body>
        <p><center><h1>scrapy图片的抓取</h1></center></p>
            <div class="cont">
<h1>scrapy图片的抓取</h1>
<p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">需求分析</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p>1、目标网站——天猫商城</p><p>2、抓取内容——天猫商城销量前60的商品的情况（商品价格、商品名称、商品URL）、店铺的情况（店铺名称、店铺URL、公司名称、公司地址），</p><p>以及商品的图片</p><p>3、存储格式——图片存储到本地文件夹，数据存储到csv文件中</p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">代码解读</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p><strong>1、item编写</strong></p><p><br/></p><p><img alt="Python1.png" src="images/b0a72cb4db74d17a6948235406e4bca7.png" title="wk9mW3n3v4mM5pMVOU.png"/> </p><p><br/></p><p><strong>2、spider编写</strong></p><p><br/></p><p><img alt="Python2.png" src="images/e461bd4ec8de303650e0ae0ae1dafce4.png" title="ZpLHTnORDJLytLhWw9.png"/> </p><p><br/></p><p><img alt="Python3.png" height="341" src="images/234d255bca70e2702064eaf60d10255d.png" style="width: 744px; height: 341px;" title="5t1WrERNcoP2xJCJTi.png" width="744"/> </p><p><br/></p><p><img alt="Python4.png" height="354" src="images/b1c4a006dda336f5ca69bf3024f3bc9d.png" style="width: 736px; height: 354px;" title="0QWahMNWOm5H9P8ULO.png" width="736"/> </p><p><br/></p><p><strong>3、pipeline编写</strong></p><p><br/></p><p><strong><img alt="Python5.png" src="images/14463651091111e3edf0d62f4a4fc406.png" title="GViwQAuY8ohvQUME34.png"/> </strong></p><p><br/></p><p><strong>4、settings设置</strong></p><p><br/></p><p><img alt="Python6.png" src="images/c18e31e149038e9e0a2c444ec09fcd3c.png" title="IC9UAi7bZMZNSRXy4l.png"/> </p><p><br/></p><p><strong>5、运行</strong></p><p><br/></p><p><img alt="Python7.png" src="images/1ef23ce20bbadb665e2a1f5f0252bbab.png" title="tGy8D1wN3LQkqJopTO.png"/> </p><p><br/></p><p>从上面的图中我们可以看出，机器没有安装PIL，如何进行PIL的安装？</p><p><br/></p><p>Using the Images Pipeline</p><p>Using the ImagesPipeline is a lot like using the FilesPipeline, except the default field names used are dif-ferent: you use image_urls for the image URLs of an item and it will populate an images field for the information about the downloaded images.</p><p>he advantage of using the ImagesPipeline for image files is that you can configure some extra functions like generating thumbnails and filtering the images based on their size.</p><p> </p><p>The Images Pipeline uses Pillow for thumbnailing and normalizing images to JPEG/RGB format, so you need to install this library in order to use it. Python Imaging Library (PIL) should also work in most cases, but it is known to cause troubles in some setups, so we recommend to use Pillow instead of PIL.</p><p><br/></p><p>安装完毕：</p><p><br/></p><p><img alt="Python8.png" src="images/c9693df86b95ef38a5b6ae1c7e737cf8.png" title="xza8MkJHJyvcxfQLST.png"/> </p><p><br/></p><p>安装完成之后再次执行：</p><p><br/></p><p><img alt="Python9.png" src="images/8a4754adcd618d940b72f5fbf70adfd0.png" title="j3jR2gqghrlCh26m2l.png"/> </p><p> </p><p>此时打开相应文件夹，可以看到我们爬取的图片：</p><p><br/></p><p><img alt="Python10.png" src="images/a19ef5c4b2d683fb153e14a4e0930a46.png" title="A3qVyHdCNCjx91Barc.png"/> </p><p><br/></p><h3><span style="color: rgb(94, 207, 186);"></span></h3><hr/><h3><span style="color: rgb(94, 207, 186);">总结</span><br/></h3><p><span style="color: rgb(94, 207, 186);"><br/></span></p><p>要求掌握：</p><p>怎样在spider的不同parse函数中传递数据</p><p><br/></p><p><br/></p><p><span style='color: rgb(192, 0, 0); font-family: "microsoft yahei"; font-weight: bold; line-height: 20px; background-color: rgb(255, 255, 255);'>【本文由麦子学院独家原创，转载请注明出处并保留原文链接】</span></p><p>
</p></p></div>
        </body></html>